<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dual Subtitles Creator & Translate</title>
    <link rel="stylesheet" href="style.css">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LNRWB06VGZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-LNRWB06VGZ');
</script>
</head>
<body data-theme="light">

    <header class="header">
        <div class="brand">
            <a href="#" class="brand-name">DuoSub online - web Translator/Creator (v2.0)</a>
            <span class="brand-desc" id="ui-desc">Subtitle Translation - Create dual subtitles to/from any language</span>
        </div>
        <div class="controls">
            üåê <select id="lang-ui" style="width: auto; padding: 4px;">
                <option value="en">English</option>
                <option value="zh">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
                <option value="de">Deutsch</option>
                <option value="fr">Fran√ßais</option>
                <option value="it">Italiano</option>
            </select>
            <button class="btn" id="btn-reset">üîÑ Reset</button>
            <button class="btn" id="theme-btn">üåì Theme</button>
            <a href="https://duosub.github.io/donate" target="_blank" class="btn donate-btn" style="text-decoration:none">‚òï Donate</a>
        </div>
    </header>

    <div class="main-layout">
        <aside class="sidebar">
            <div class="group">
                <div class="file-drop" id="drop-zone">
                    <span id="ui-drop">Click or Drop subtitle file<br>*.srt,*.ass,*.vtt,*.sub,*.txt (utf8)</span>
                    <input type="file" id="file-input" accept=".srt,.ass,.vtt,.txt" style="position:absolute; top:0; left:0; width:100%; height:100%; opacity:0; cursor:pointer;">
                </div>
                <div id="file-name" class="file-info"></div>
            </div>

            <div class="group">
                <span class="label" id="ui-engine">Translation Engine</span>
                <select id="engine-select">
                    <option value="google_free">Google Translate (Web Free)</option>
                    <option value="gas">Google Apps Script (Personal API Key)</option>
                </select>

            </div>

            <div class="group" id="api-group" style="display: none; margin-top: 10px;">
    <span class="label" style="display: block; margin-bottom: 5px; font-weight: bold;">Personal API Key</span>
    <input type="text" id="api-key-input" placeholder="Paste Your Personal API Key here..." style="width: 100%; box-sizing: border-box;">

    <div style="text-align:right; margin-top:2px;">
        <small style="cursor:pointer; color:var(--accent); text-decoration:underline;" onclick="document.getElementById('guide-box').style.display = document.getElementById('guide-box').style.display === 'none' ? 'block' : 'none'">How to create Key?</small>
    </div>

    <div class="api-guide" id="guide-box" style="display: none; margin-top: 5px;">
        1. Go to <a href="https://script.google.com" target="_blank">script.google.com</a> & New Project.<br>
        2. Paste code from instructions.<br>
        <code>function doPost(e){try{var p=JSON.parse(e.postData.contents),t=LanguageApp.translate(p.q,"",p.target||"en");return ContentService.createTextOutput(JSON.stringify({status:"success",translatedText:t})).setMimeType(ContentService.MimeType.JSON)}catch(i){return ContentService.createTextOutput(JSON.stringify({status:"error",message:i.toString()})).setMimeType(ContentService.MimeType.JSON)}}</code>
        3. Deploy > Web App > Who can access: Anyone</br>
        4. üìÑ Copy created link "https://script.google.com/macros/s/YOUR_PERSONAL_API_KEY/exec"</br>
        <div style="text-align: center; margin-top: 10px;">
        <a href="https://duosub.github.io/help" target="_blank" style="text-transform: capitalize;">Open full guide</a>
    </div>
    </div>
</div>

            <div class="group">
                <span class="label" id="ui-target">Target Language</span>
                <select id="target-lang"></select>
            </div>

            <div class="group">
                <span class="label" id="ui-delay">Request Delay (Seconds)</span>
                <input type="number" id="delay-input" value="0.5" min="0" step="0.1">
            </div>

            <div class="group" style="margin-top:auto">
<div id="progress-container" class="progress-container" style="display: none;">
    <div id="progress-bar" class="progress-bar"></div>
</div>
                <div style="display:flex; gap:5px; margin-top:5px;">
                    <button id="btn-start" class="btn btn-primary" style="flex:2">START</button>
                    <button id="btn-pause" class="btn" disabled>‚è∏ Pause</button>
                    <button id="btn-stop" class="btn btn-danger" disabled>‚èπ Stop</button>
                </div>
            </div>
        </aside>

        <main class="workspace">
            <div class="preview-area">
                <div class="panel-header">
                    <span class="panel-title" id="ui-preview">Live Preview</span>
                    <div class="controls">
                         <button class="btn" id="btn-copy-sub">üìã Copy</button>
                         <button class="btn btn-primary" id="btn-download" disabled>üíæ Download</button>
                    </div>
                </div>
                <div id="preview-content" class="code-block"></div>
            </div>
            <div class="log-area">
                <div class="panel-header">
                    <span class="panel-title">System Logs</span>
                    <div class="controls">
                        <button class="btn" id="btn-email-log" style="font-size:10px; padding:2px 8px;">‚úâÔ∏è Report by Mail</button>
                        <button class="btn" id="btn-copy-log" style="font-size:10px; padding:2px 8px;">üìã Copy Logs</button>
                    </div>
                </div>
                <div id="log-content" class="code-block" style="font-size:11px;"></div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
